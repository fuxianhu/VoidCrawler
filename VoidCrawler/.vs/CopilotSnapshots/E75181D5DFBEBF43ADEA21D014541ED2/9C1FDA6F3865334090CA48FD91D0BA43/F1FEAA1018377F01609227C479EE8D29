/*

项目主文件

Minecraft PVP 技巧：
https://www.bilibili.com/video/BV1GygYzZEHA/
https://www.bilibili.com/video/BV1xRtbzjEme/

E:\Qt\6.5.3\msvc2019_64\bin\lupdate .\VoidCrawler.vcxproj -ts .\translations\zh-CN.ts
E:\Qt\6.5.3\msvc2019_64\bin\lrelease .\translations\en-US.ts -qm .\translations\en-US.qm

*/

#include "VoidCrawler.h"
#include "LoggerManager.h"
#include "configOperate.h"
#include "Core.h"

#include <unordered_map>
#include <windows.h>
#include <cstdlib>
#include <iostream>
#include <format>

#include <QDir>
#include <QMessageBox>
#include <QtWidgets/QApplication>
#include <QDebug>
#include <QTranslator>
#include <QObject>

#include <QJsonObject>
#include <QJsonArray>
#include <QJsonDocument>
#include <QJsonValue>
#include <QJsonParseError>



QJsonDocument mainConfig, categoryConfig;




int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    //QLocale::setDefault(QLocale(QLocale::Chinese, QLocale::China));
    // 使用系统默认语言
    QLocale::setDefault(QLocale::system());

    readJSON(mainConfig, "main.json");
    
    VoidCrawlerCore::logger->info(std::format("Application started. Version: {}", VoidCrawlerCore::VoidCrawlerVersion.toStdString()));
    VoidCrawlerCore::logger->debug(mainConfig.object().value("language").toString().toStdString());

    VoidCrawler window;
    VoidCrawlerCore::logger->debug("ac");
    //window.changeLanguage("en-US");
    //window.changeLanguage("zh-CN");
    window.initUI();
    VoidCrawlerCore::logger->debug("show..");
    window.show();
    VoidCrawlerCore::logger->debug("exec..");
    return app.exec();
}