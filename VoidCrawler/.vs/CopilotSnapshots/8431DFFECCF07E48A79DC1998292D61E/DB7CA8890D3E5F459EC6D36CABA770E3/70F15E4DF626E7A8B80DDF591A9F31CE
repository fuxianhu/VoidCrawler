#include "MediaPlayer.h"

AudioPlayer::AudioPlayer(QWidget* parent)
	: QMainWindow(parent)
{
	setAttribute(Qt::WA_DeleteOnClose); // 关闭时自动释放内存

	// 不在任务栏显示图标    无边框窗口，以便自定义标题栏样式    置顶窗口
	this->setWindowFlags(Qt::Tool | Qt::FramelessWindowHint | Qt::WindowStaysOnTopHint);

	resize(400, 200);
	QWidget* w = new QWidget(this);
	w->setObjectName("centralWidget");
	w->setStyleSheet("background: transparent;");
	setCentralWidget(w);

	QPainterPath PainterPath;	//绘制一个QPainter路径对象
	PainterPath.addRoundedRect(this->rect(), 10, 10);	//对它设置路径为四周圆角。10即圆角的深度，可以修改
	QRegion mask = QRegion(PainterPath.toFillPolygon().toPolygon());	//创建遮罩对象，内容即该QPainter路径
	this->setMask(mask);	//为QWidget覆盖上这个遮罩

    // UI全部渲染在w上
    player = new QMediaPlayer();
    titleLabel = new QLabel(w);
	QFont titleFont = QFont("仿宋", 30, QFont::Bold);
	titleLabel->setFont(titleFont);
    titleLabel->setText("Once upon a time");
    titleLabel->move(20, 20);
}

AudioPlayer::~AudioPlayer()
{
	delete player;
}