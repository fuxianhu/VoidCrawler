#pragma once

#include <QtWidgets/QMainWindow>
#include <QWidget>
#include <QLabel>
#include <QPushButton>
#include <QPoint>
#include <QTranslator>
#include <QResizeEvent>
#include <QEvent>
#include "ui_VoidCrawler.h"



class VoidCrawler : public QMainWindow
{
    Q_OBJECT

public:
    VoidCrawler(QWidget *parent = nullptr);
    ~VoidCrawler();

	void initUI(); // 初始化UI组件
	void changeLanguage(const QString& langCode); // 切换语言代码

protected:
    void resizeEvent(QResizeEvent* event) override;
    bool eventFilter(QObject* watched, QEvent* event) override;

private:
    Ui::VoidCrawlerClass ui;
	QTranslator* translator = nullptr; // 翻译器指针
	int m_cornerRadius = 12; // 窗口圆角半径

	QWidget* m_titleBar = nullptr; // 自定义标题栏
	QLabel* m_titleLabel = nullptr; // 标题文字
	QWidget* m_contentWidget = nullptr; // 下面可折叠的内容容器

	// 拖动状态
	bool m_dragging = false;
	QPoint m_dragPosition;

	// 展开折叠按钮
	QPushButton* m_toggleButton = nullptr;
	bool m_expanded = true; // 默认情况下开始展开

	// 展开/折叠高度
	int m_expandedHeight = 800;
	int m_collapsedHeight = 100;
	int m_contentExpandedHeight = 0; // 布局后计算
	int m_contentCollapsedHeight = 0; // 折叠为零，仅显示标题栏

	int m_titleBarHeight = 48; // 标题栏高度（成员保存，避免在resize时读取子控件高度导致问题）
};